<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head th:replace="layouts/APPHeader/apphead :: headFragment" />

<body style="background: #f5f9fa;">
<header>

</header>
<div class="content flex">
  <div class="header on">
    <div class="left">
      <div class="ham">
        <button type="button"><img th:src="@{/assets/images/ham.png}" alt=""></button>
      </div>
      <div class="nav_bg"></div>
      <!-- ################################ -->
      <!-- ## Left navigator include -->
      <th:block th:include="layouts/APPHeader/appLeftNav" />
    </div>
    <div class="right">
    </div>
  </div>
  <div class="con">
    <div class="header_top">
      <ul class="left">
        <li>
          <div class="logo">
            <a href="">
              <img th:src="@{/assets/images/logo.png}" alt="">
            </a>
          </div>
        </li>
        <li class="home">
          <a><img th:src="@{/assets/images/i_home.png}" alt=""></a>
          <a><img th:src="@{/assets/images/i_home_on.png}" alt=""></a>
        </li>
        <li>
          종합유지관리서비스
        </li>
        <li class="on">
          현장별월별통계
        </li>
      </ul>
      <ul class="right">
        <li>
          <a href="">
            <img th:src="@{/assets/images/i_call.png}" alt="">
          </a>
        </li>
        <li>
          <a href="">
            <img th:src="@{/assets/images/i_bell.png}" alt="">
          </a>
        </li>
        <li>
          <a href="">
            <img th:src="@{/assets/images/i_menu.png}" alt="">
          </a>
        </li>
        <li>
          <a href="">
            <img th:src="@{/assets/images/i_que.png}" alt="">
          </a>
        </li>
        <li>
          <a href="">
            <img th:src="@{/assets/images/i_user.png}" alt="">
          </a>
        </li>
      </ul>
    </div>
    <div class="infor_bar type2">
      <ul class="right" style="visibility: hidden; opacity: 0;">
        <li>
          <button type="button" class="color2">
            <i><img th:src="@{/assets/images/i_search.png}" alt=""></i>조회
          </button>
        </li>
        <li>
          <button type="button" class="color5">
            <i><img th:src="@{/assets/images/i_print.png}" alt=""></i>프린트
          </button>
        </li>
      </ul>
      <div class="left">
        현장월별통계
      </div>
      <ul class="right">
        <li>
          <button type="button" class="color2" id="retrieveBtn">
            <i><img th:src="@{/assets/images/i_search.png}" alt=""></i>조회
          </button>
        </li>
        <!-- <li>
            <button type="button" class="color5">
                <i><img th:src="@{/assets/images/i_print.png}" alt=""></i>프린트
            </button>
        </li> -->
      </ul>

    </div>
    <div class="section">
      <div class="sec_con" style="width: 100%;">
        <div class="box_wrap">
          <ul class="search_box">
            <li>
              <div class="input-group mb-3"><span class="input-group-text" id="basic-addon1">기간</span>
                <input type="text"  class="form-control datetimepicker" id="frdate" autocomplete="off"  placeholder="Y-m-d"     >
                <!-- <span>-</span> -->
                <input type="text"  class="form-control datetimepicker" id="todate" autocomplete="off"  placeholder="Y-m-d"     >
              </div>
            </li>
            <li>
              <div class="input-group mb-3"><span class="input-group-text" id="basic-addon1">현장명</span>
                <input class="form-control" type="text" placeholder="현장명을 입력하세요" id="actnmz" name="actnmz" aria-label="actnmz" aria-describedby="basic-addon1" />
                <input class="form-control form-control-sm"  type="hidden"  id="actcdz"  />
              </div>
            </li>
            <li>
              <div class="input-group mb-3">
                <input class="form-control" type="hidden" placeholder="고장내용을 입력하세요" aria-label="actcontnmz" id="actcontnmz" aria-describedby="basic-addon1" />
                <input class="form-control form-control-sm"  type="hidden"  id="actcontcdz"  />
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="section status">
      <div class="sec_con" style="width: 100%;">
        <div class="box_wrap">
          <div class="table table_style2">
            <div class="card-body bg-light">
              <ul class="nav nav-tabs">
                <li class="nav-item">
                  <a class="nav-link active" data-toggle="tab" href="#step01" onclick="tabchk_rtn('A')">현장월별통계</a>
                </li>
                <!--<li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#step02"  onclick="tabchk_rtn('B')">현장별고장내용</a>
                </li>--><!--
                <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#step03"  onclick="tabchk_rtn('C')">호기별고장내용</a>
                </li>-->
                <input type="hidden" id="tabvalue" value="A">
              </ul>
              <div class="tab-content">
                <div class="tab-pane fade show active" id="step01">
                  <div class="container-fluid">


                    <div id="theGrid" class="animated"></div>
                    <div id="tab01Pager"></div>
                  </div>
                </div>
                <!--<div class="tab-pane fade" id="step02">
                  <div class="container-fluid">
                    <div id="chartTabB"></div>
                  </div>
                </div>-->
                <!--<div class="tab-pane fade" id="step03">
                  <div class="container-fluid">
                    <select id="typeMenu">
                      <option value="0" selected="selected">사분면(Squarified)</option>
                      <option value="1">수평(Horizontal)</option>
                      <option value="2">수직(Vertical)</option>
                    </select>
                    <div id="chartTabC"></div>
                  </div>
                </div>-->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <input class="form-control form-control-sm"  type="hidden" id="actnmbtn" data-bs-toggle="modal" data-bs-target="#actnmmodal"  />
  <!--    <input class="form-control form-control-sm"  type="hidden" id="actcontnmbtn" data-bs-toggle="modal" data-bs-target="#actcontnmmodal"  />-->


  <!--------------------------------------------------------------------------------------->
  <!-- 현장명 MODAL FROM  -->
  <div class="modal fade" id="actnmmodal" data-bs-keyboard="false"
       data-bs-backdrop="static" tabindex="-1" aria-labelledby="staticBackdropLabel"
       aria-hidden="true">
    <div class="modal-dialog modal-lg mt-6" role="document" id = "modalForm01"
         style="max-width: 800px">
      <div class="modal-content border-0">
        <div class="modal-body p-0" >
          <div class="rounded-top-lg py-3 ps-4 pe-6 bg-light">
            <!-- <h4 class="mb-1" id="modalExampleDemoLabel">현장검색</h4>  -->
            <div class="search">
              <div class="input_wrap">
                <input class="form-control form-control-sm" id="searchCode" type="text"   onkeyup="if(window.event.keyCode==13){searchpcode_rtn()}"
                       placeholder="현장코드 / 현장명 "     />
              </div>
              <button id="wactnmBtn">
                <img th:src="@{/assets/images/i_search.png}" alt="">
              </button>
            </div>
            <div  class="save_id" >
              <input type="checkbox" id="conflag" value="1" checked>
              <label for="conflag" class="check_style1">계약현장</label>
            </div>
          </div>
          <div class="container-fluid">
            <div id="theGroupPanel"></div>
            <div id="wactnmGrid_div" ></div>
            <div id="thePager01"></div>
          </div>
        </div>

        <div class="modal-footer">
          <div class="row g-1">
            <div class="col-auto">
              <button class="badge-soft-primary dropdown-item rounded-1"
                      type="button"  id="wactnmmodal_btn" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
  <!--------------------------------------------------------------------------------------->


  <!--------------------------------------------------------------------------------------->
  <!-- 고장내용 MODAL FROM  -->
  <div class="modal fade" id="actcontnmmodal" data-bs-keyboard="false"
       data-bs-backdrop="static" tabindex="-1" aria-labelledby="staticBackdropLabel"
       aria-hidden="true">
    <div class="modal-dialog modal-lg mt-6" role="document" id = "modalForm01"
         style="max-width: 500px">
      <div class="modal-content border-0">
        <div class="modal-body p-0" >
          <div class="rounded-top-lg py-3 ps-4 pe-6 bg-light">
            <!-- <h4 class="mb-1" id="modalExampleDemoLabel">현장검색</h4>  -->
            <div class="search">
              <div class="input_wrap">
                <input class="form-control form-control-sm" id="searchTxtCode" type="text"   onkeyup="if(window.event.keyCode==13){searchtxt_rtn()}"
                       placeholder="고장내용 "     />
              </div>
              <button id="wcontnmBtn">
                <img th:src="@{/assets/images/i_search.png}" alt="">
              </button>
            </div>
          </div>
          <div class="container-fluid">
            <div id="wcontnmGrid_div" ></div>
            <div id="thePager02"></div>
          </div>
        </div>

        <div class="modal-footer">
          <div class="row g-1">
            <div class="col-auto">
              <button class="badge-soft-primary dropdown-item rounded-1"
                      type="button"  id="wcontnmmodal_btn" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
  <!--------------------------------------------------------------------------------------->








  <script type="text/javascript" th:inline="javascript">
    var theGrid;
    var view_p01tab01page;
    var view_actnmpage;
    var wactnmGrid;

    window.onload = function() {

      view_p01tab01page = new wijmo.collections.CollectionView(getData_tab01(), {
        pageSize: 12
      })

        // 열 그룹 옵션
        let colGroups1 = getColumnGroups();

        // 열 그룹을 가진 그리드 생성
        theGrid = new wijmo.grid.FlexGrid("#theGrid", {
          headersVisibility: "Column",
          alternatingRowStep: 0,
          showMarquee: true,
          showSelectedHeaders: "All",
          autoGenerateColumns: false,
          columnGroups: colGroups1,
          itemsSource:  view_p01tab01page//getData()
        });

        // 열 축소/확장 애니메이션 전환
        document.getElementById("animated").addEventListener("click", (e) => {
          wijmo.toggleClass(theGrid.hostElement, "animated", e.target.checked);
        });




      function getColumnGroups() {

        return [
          {binding: "actnm", header: "현장명", width: 150},

          {

            header: "1월",
            align: "center",

            columns: [
              {
                binding: "1월.rece1",
                header: "접수",
                format: "a0",
                width: 80,
                cssClass: "main-column",
                align: "center",
              },
              {binding: "1월.comp1", header: "처리", format: "a0", width: 80, align: "center"},

            ]
          },
          {
            header: "2월",
            align: "center",

            columns: [
              {binding: "2월.rece2", header: "접수", format: "a0", width: 80, cssClass: "main-column", align: "center"},
              {binding: "2월.comp2", header: "처리", format: "a0", width: 80, align: "center"},

            ]
          },
          {
            header: "3월",
            align: "center",

            columns: [
              {binding: "3월.rece3", header: "접수", format: "a0", width: 80, cssClass: "main-column", align: "center"},
              {binding: "3월.comp3", header: "처리", format: "a0", width: 80, align: "center"},

            ]
          },
          {
            header: "4월",
            align: "center",

            columns: [
              {binding: "4월.rece4", header: "접수", format: "a0", width: 80, cssClass: "main-column", align: "center"},
              {binding: "4월.comp4", header: "처리", format: "a0", width: 80, align: "center"},

            ]
          },
          {
            header: "5월",
            align: "center",

            columns: [
              {binding: "5월.rece5", header: "접수", format: "a0", width: 80, cssClass: "main-column", align: "center"},
              {binding: "5월.comp5", header: "처리", format: "a0", width: 80, align: "center"},

            ]
          },
          {
            header: "6월",
            align: "center",

            columns: [
              {binding: "6월.rece6", header: "접수", format: "a0", width: 80, cssClass: "main-column", align: "center"},
              {binding: "6월.comp6", header: "처리", format: "a0", width: 80, align: "center"},

            ]
          },
          {
            header: "7월",
            align: "center",

            columns: [
              {binding: "7월.rece7", header: "접수", format: "a0", width: 80, cssClass: "main-column", align: "center"},
              {binding: "7월.comp7", header: "처리", format: "a0", width: 80, align: "center"},

            ]
          },
          {
            header: "8월",
            align: "center",

            columns: [
              {binding: "8월.rece8", header: "접수", format: "a0", width: 80, cssClass: "main-column", align: "center"},
              {binding: "8월.comp8", header: "처리", format: "a0", width: 80, align: "center"},

            ]
          },
          {
            header: "9월",
            align: "center",

            columns: [
              {binding: "9월.rece9", header: "접수", format: "a0", width: 80, cssClass: "main-column", align: "center"},
              {binding: "9월.comp9", header: "처리", format: "a0", width: 80, align: "center"},

            ]
          },
          {
            header: "10월",
            align: "center",

            columns: [
              {binding: "10월.rece10", header: "접수", format: "a0", width: 80, cssClass: "main-column", align: "center"},
              {binding: "10월.comp10", header: "처리", format: "a0", width: 80, align: "center"},

            ]
          },
          {
            header: "11월",
            align: "center",

            columns: [
              {binding: "11월.rece11", header: "접수", format: "a0", width: 80, cssClass: "main-column", align: "center"},
              {binding: "11월.comp11", header: "처리", format: "a0", width: 80, align: "center"},

            ]
          },
          {
            header: "12월",
            align: "center",

            columns: [
              {binding: "12월.rece12", header: "접수", format: "a0", width: 80, cssClass: "main-column", align: "center"},
              {
                binding: "12월.comp12", header: "처리", format: "a0", width: 80, align: "center"
              },

            ]
          },


        ];
      }



      //검색 데이터 수집
      function getData_tab01() {
        return [
          {
            actnm: "aa",

            "1월": {
              rece1: "",
              comp1: "",

            },
            "2월": {
              rece2: "",
              comp2: "",

            },
            "3월": {
              rece3: "",
              comp3: "",

            },
            "4월": {
              rece4: "",
              comp4: "",

            },
            "5월": {
              rece5: "",
              comp5: "",

            },
            "6월": {
              rece6: "",
              comp6: "",

            },
            "7월": {
              rece7: "",
              comp7: "",

            },
            "8월": {
              rece8: "",
              comp8: "",

            },
            "9월": {
              rece9: "",
              comp9: "",

            },
            "10월": {
              rece10: "",
              comp10: "",

            },
            "11월": {
              rece11: "",
              comp11: "",

            },
            "12월": {
              rece12: "",
              comp12: "",

            },
          },

        ];

      }



    }

    //@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
    //현장 검색


    //tab01 검색
    document.getElementById("retrieveBtn").addEventListener("click", function(){

      let ls_tab = document.getElementById('tabvalue').value;
      let ls_frdate = document.getElementById('frdate').value;
      let ls_todate = document.getElementById('todate').value;
      let ls_actcdz = document.getElementById('actcdz').value;
      let ls_actnmz = document.getElementById('actnmz').value;
      if(ls_actnmz == null || ls_actnmz.length == 0 || ls_actnmz == ""){
        ls_actcdz = "%";
        document.getElementById('actcdz').value = "";

      }
      if(ls_actcdz == null || ls_actcdz.length == 0 || ls_actcdz == ""){
        ls_actcdz = "%";
      }
      searchList_rtn(ls_frdate, ls_todate, ls_actnmz);
    })

    function searchList_rtn(arg2, arg3, arg4){
      $.ajax({
        url: '/app00/p001tab01',
        type: "POST",
        data: {
          "frdate" : arg2,
          "todate" : arg3,
          "actnm" : arg4,

        },
        async: false,
        success: function(data){
          console.log("succ" + data);
          tabA_grid(data);
        },error:function(e){
          console.log("error");
          // alert(data.code);
          // alert(data.message);
        }
      }).done(function(fragment){

      })

    }

    function tabA_grid(data){
      var wtab01Dto = data;
      var wtab01_data = [];
      var cnt = 1;
      for(var i=0; i<wtab01Dto.length; i++){
        wtab01_data.push({
          id: i,
          index: cnt,
          actnm: wtab01Dto[i]["actnm"],
          rece1: wtab01Dto[i]["rece1"],
          comp1: wtab01Dto[i]["comp1"],
          rece2: wtab01Dto[i]["rece2"],
          comp2: wtab01Dto[i]["comp2"],
          rece3: wtab01Dto[i]["rece3"],
          comp3: wtab01Dto[i]["comp3"],
          rece4: wtab01Dto[i]["rece4"],
          comp4: wtab01Dto[i]["comp4"],
          rece5: wtab01Dto[i]["rece5"],
          comp5: wtab01Dto[i]["comp5"],
          rece6: wtab01Dto[i]["rece6"],
          comp6: wtab01Dto[i]["comp6"],
          rece7: wtab01Dto[i]["rece7"],
          comp7: wtab01Dto[i]["comp7"],
          rece8: wtab01Dto[i]["rece8"],
          comp8: wtab01Dto[i]["comp8"],
          rece9: wtab01Dto[i]["rece9"],
          comp9: wtab01Dto[i]["comp9"],
          rece10: wtab01Dto[i]["rece10"],
          comp10: wtab01Dto[i]["comp10"],
          rece11: wtab01Dto[i]["rece11"],
          comp11: wtab01Dto[i]["comp11"],
          rece12: wtab01Dto[i]["rece12"],
          comp12: wtab01Dto[i]["comp12"],


        });
        cnt++;
      }
      console.log("wtab01_data, check", )

      theGrid.columns.clear();
      theGrid.autoGenerateColumns = false;
      view_p01tab01page = new wijmo.collections.CollectionView(getData_tab01(), {

      })

      //view_p01tab01page.sourceCollection = wtab01_data;


      let gridFormat =[

        {binding: "actnm", header: "현장명", width: 150},
        {
        header: "1월",
        align: "center",
        columns: [
          {
            binding: "1월.rece1",
            header: "접수",
            format: "a0",
            width: 80,
            align: "center",

          },
          { binding: "1월.comp1", align: "center", header: "처리", format: "a0", width: 80 },
        ]
      },
        {
          header: "2월",
          align: "center",
          columns: [
            {binding: "2월.rece2", align: "center", header: "접수", format: "a0", width: 80 },
            { binding: "2월.comp2", align: "center", header: "처리", format: "a0", width: 80 },
          ]
        },
        {
          header: "3월",
          align: "center",
          columns: [
            { binding: "3월.rece3", align: "center", header: "접수",  format: "a0",  width: 80},
            { binding: "3월.comp3", align: "center", header: "처리", format: "a0", width: 80 },
          ]
        },
        {
          header: "4월",
          align: "center",
          columns: [
            {binding: "4월.rece4", align: "center", header: "접수", format: "a0", width: 80 },
            { binding: "4월.comp4", align: "center", header: "처리", format: "a0", width: 80 },
          ]
        }
        ,
        {
          header: "5월",
          align: "center",
          columns: [
            { binding: "5월.rece5", align: "center",  header: "접수",  format: "a0",  width: 80 },
            { binding: "5월.comp5", align: "center", header: "처리", format: "a0", width: 80 },
          ]
        },
        {
          header: "6월",
          align: "center",
          columns: [
            { binding: "6월.rece6", align: "center",  header: "접수",  format: "a0",  width: 80 },
            { binding: "6월.comp6", align: "center", header: "처리", format: "a0", width: 80 },
          ]
        }
        ,
        {
          header: "7월",
          align: "center",
          columns: [
            { binding: "7월.rece7", align: "center", header: "접수",  format: "a0",  width: 80 },
            { binding: "7월.comp7", align: "center", header: "처리", format: "a0", width: 80 },
          ]
        }
        ,
        {
          header: "8월",
          align: "center",
          columns: [
            {binding: "8월.rece8", align: "center", header: "접수", format: "a0", width: 80  },
            { binding: "8월.comp8", align: "center", header: "처리", format: "a0", width: 80 },
          ]
        },
        {
          header: "9월",
          align: "center",
          columns: [
            {
              binding: "9월.rece9",
              header: "접수",
              format: "a0",
              width: 80,
              align: "center",

            },
            { binding: "9월.comp9", align: "center", header: "처리", format: "a0", width: 80 },
          ]
        },
        {
          header: "10월",
          align: "center",
          columns: [
            {
              binding: "10월.rece10",
              header: "접수",
              format: "a0",
              width: 80,
              align: "center",
            },
            { binding: "10월.comp10", align: "center", header: "처리", format: "a0", width: 80 },
          ]
        },
        {
          header: "11월",
          align: "center",
          columns: [
            {
              binding: "11월.rece11",
              header: "접수",
              format: "a0",
              width: 80,
              align: "center",

            },
            { binding: "11월.comp11", align: "center", header: "처리", format: "a0", width: 80 },
          ]
        },
        {
          header: "12월",
          align: "center",
          columns: [
            {
              binding: "12월.rece12",
              header: "접수",
              format: "a0",
              width: 80,
              align: "center",
            },
            { binding: "12월.comp12", align: "center", header: "처리", format: "a0", width: 80 },
          ]
        }
              ]

      function getData_tab01() {
        return [
          {
            actnm: wtab01Dto[0]["actnm"],

            "1월": {
              rece1: wtab01Dto[0]["rece1"],
              comp1: wtab01Dto[0]["comp1"],

            },
            "2월": {
              rece2: wtab01Dto[0]["rece2"],
              comp2: wtab01Dto[0]["comp2"],

            },
            "3월": {
              rece3: wtab01Dto[0]["rece3"],
              comp3: wtab01Dto[0]["comp3"],

            },
            "4월": {
              rece4: wtab01Dto[0]["rece4"],
              comp4: wtab01Dto[0]["comp4"],

            },
            "5월": {
              rece5: wtab01Dto[0]["rece5"],
              comp5: wtab01Dto[0]["comp5"],

            },
            "6월": {
              rece6: wtab01Dto[0]["rece6"],
              comp6: wtab01Dto[0]["comp6"],

            },
            "7월": {
              rece7: wtab01Dto[0]["rece7"],
              comp7: wtab01Dto[0]["comp7"],

            },
            "8월": {
              rece8: wtab01Dto[0]["rece8"],
              comp8: wtab01Dto[0]["comp8"],

            },
            "9월": {
              rece9: wtab01Dto[0]["rece9"],
              comp9: wtab01Dto[0]["comp9"],

            },
            "10월": {
              rece10: wtab01Dto[0]["rece10"],
              comp10: wtab01Dto[0]["comp10"],

            },
            "11월": {
              rece11: wtab01Dto[0]["rece11"],
              comp11: wtab01Dto[0]["comp11"],

            },
            "12월": {
              rece12: wtab01Dto[0]["rece12"],
              comp12: wtab01Dto[0]["comp12"],

            },
          },

        ];

      }
      console.log('------------');


      theGrid.columnGroups = gridFormat;
      theGrid.itemsSource = view_p01tab01page;


      // console.log(theGrid.columnGroups);
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'comp1';
      // cols.header = '처리';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'rece2';
      // cols.header = '접수';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'comp2';
      // cols.header = '처리';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'rece3';
      // cols.header = '접수';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'comp3';
      // cols.header = '처리';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'rece4';
      // cols.header = '접수';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'comp4';
      // cols.header = '처리';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'rece5';
      // cols.header = '접수';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'comp5';
      // cols.header = '처리';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'rece6';
      // cols.header = '접수';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'comp6';
      // cols.header = '처리';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'rece7';
      // cols.header = '접수';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'comp7';
      // cols.header = '처리';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'rece8';
      // cols.header = '접수';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'comp8';
      // cols.header = '처리';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'rece9';
      // cols.header = '접수';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'comp9';
      // cols.header = '처리';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'rece10';
      // cols.header = '접수';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'comp10';
      // cols.header = '처리';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'rece11';
      // cols.header = '접수';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'comp11';
      // cols.header = '처리';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'rece12';
      // cols.header = '접수';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);
      //
      //
      //
      // cols = new wijmo.grid.Column();
      // cols.binding = 'comp12';
      // cols.header = '처리';
      // cols.align = 'center';
      // cols.width = '1*';
      // theGrid.columns.push(cols);




    }









  </script>

  <script>

    //현장검색 popup list
    view_actnmpage = new wijmo.collections.CollectionView(getData_wlist(), {
      pageSize: 12
    });
    // 현장검색 페이지 이동
    new wijmo.input.CollectionViewNavigator('#thePager01', {
      byPage: true,
      headerFormat: 'Page {currentPage:n0} of {pageCount:n0}',
      cv: view_actnmpage
    });
    wactnmGrid = new wijmo.grid.FlexGrid('#wactnmGrid_div', {
      autoGenerateColumns: false,
      isReadOnly: false,
      allowSorting: 'MultiColumn',
      selectionMode: 'RowRange',
      alternatingRowStep: 0,
      columns: [
        {binding: 'actnm', header: '현장명', align: "center", width: '1*'},
        {binding: 'telno', header: '전화번호', align: "center", width: '1*'},
        {binding: 'addr', header: '주소', align: "center", width: '*'},
      ],
      itemsSource: view_actnmpage
    });

    // 현장검색 데이터 수집
    function getData_wlist() {
      var wactnm_data = [];
      var cnt = 1;
      for (var i = 0; i < 12; i++) {
        wactnm_data.push({
          id: i,
          index: cnt,
          actnm: "",
          telno: "",
          addr: "",
        });
        cnt++;
      }
      return wactnm_data;
    }






    document.getElementById("actnmz").addEventListener("click",function(){
      document.getElementById("actnmbtn").click();
    });

    //@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
    document.getElementById("wactnmBtn").addEventListener("click", function(){
      searchpcode_rtn();
    })







    function searchpcode_rtn(){
      let searchText = '';
      searchText = document.getElementById('searchCode').value;
      let lsConflag = document.getElementById('conflag').value;
      if(searchText == null || searchText.length == 0 || searchText == ""){
        searchText = "%";
      }
      $.ajax({
        url: '/pop01/wactnm',
        type: "POST",
        data: {
          "actnmz" : searchText,
          "conflag" : lsConflag
        },
        success:function (data){
          var wactnmDto = data;
          var wactnm_data = [];
          var cnt = 1;
          for(var i=0; i< wactnmDto.length; i++){
            wactnm_data.push({
              id: i,
              index: cnt,
              actnm:wactnmDto[i]["actnm"],
              actcd: wactnmDto[i]["actcd"],
              telno: wactnmDto[i]["telno"]  ,
              addr: wactnmDto[i]["addr"]

            });
            cnt++;
          }
          wactnmGrid.columns.clear();
          wactnmGrid.autoGenerateColumns = false;
          view_actnmpage.sourceCollection = wactnm_data;
          var cols = new wijmo.grid.Column();
          cols.binding = 'actcd';
          cols.header = '코드';
          cols.align = "center";
          cols.width = '*';
          cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({
            text: '<b>${item.actcd}</b>',
            click: (e, ctx) => {
              wactnmChk_2(ctx.item.actcd, ctx.item.actnm);
            }
          });
          wactnmGrid.columns.push(cols);
          // console.log("cols", cols);


          cols = new wijmo.grid.Column();
          cols.binding = 'actnm';
          cols.header = '현장명';
          cols.align = "left";
          cols.width = '*';
          wactnmGrid.columns.push(cols);
          cols = new wijmo.grid.Column();
          cols.binding = 'telno';
          cols.header = '전화번호';
          cols.align = "center";
          cols.width = '*';
          cols.cellTemplate = wijmo.grid.cellmaker.CellMaker.makeLink({
            text: '<b>${item.telno}</b>',
            click: (e, ctx) => {
              wactnmChk_2(ctx.item.actcd, ctx.item.actnm);
            }
          });
          wactnmGrid.columns.push(cols);
          cols = new wijmo.grid.Column();
          cols.binding = 'addr';
          cols.header = '주소';
          cols.align = "left";
          cols.width = '*';
          wactnmGrid.columns.push(cols);

        },error:function(e){
          alert(data.code);
          alert(data.message);
        }
      }).done(function(fragment){

      })

    }

    function wactnmChk_2(arg1, arg2){
      document.getElementById('actcdz').value = arg1;
      document.getElementById('actnmz').value = arg2;

      $("#wactnmmodal_btn").trigger("click");
    }

  </script>

  <script>


    $(document).ready(function() {
      getToday()
      fn_egov_init_date()
      $('datetimepicker').datetimepicker({

      });

      $("#frdate").change(function(e){
        // console.log("달력클릭");
        // console.log(convert_time(e.timestamp));
      })
      $("#todate").change(function(e){
        // console.log("달력클릭");
        // console.log(convert_time(e.timestamp));
      })
    })



    function getToday(){
      let today = new Date();

      let year = today.getFullYear(); // 년도
      let month = today.getMonth() + 1;  // 월
      let date = today.getDate();  // 날짜
      let day = today.getDay();  // 요일
      if(date > 0 && date < 10) {date = "0" + date};
      let ls_frday = year + '-' + month + '-01'
      let ls_today = year + '-' + month + '-' + date
      document.getElementById('frdate').value = ls_frday;
      document.getElementById('todate').value = ls_today;
    }



    function fn_egov_init_date(){
      var $frdate = $('#frdate');
      var $todate = $('#todate');
      $frdate.datetimepicker({
        timepicker: false,
        lang: 'ko',
        format: 'Y-m-d',
        scrollMonth: false,
        scrollInput: false,
        onShow: function (ct) {
          this.setOptions({
            // maxDate: $frdate.val() ? $frdate.val() : false
          })
        },
      });

      $todate.datetimepicker({
        timepicker: false,
        lang: 'ko',
        format: 'Y-m-d',    //'Y-m-d H:i',
        scrollMonth: false,
        scrollInput: false,
        onShow: function (ct) {
          this.setOptions({
            // minDate: $todate.val() ? $todate.val() : false
          })
        }
      });

    }
  </script>

  <!------footer ------>
  <footer th:replace="layouts/APPHeader/appfooter :: footerFragment"></footer>

  <!-- modal -->
  <!-- class="modal_step_open" modal_step="1" -->

  <div class="modal modal modal_step modal_step1 hidden">
    <div class="modal_overlay">
    </div>
    <div class="modal_content modal_sm scrollbar">
      <div class="layoutCont">
        <div class="modalContWrap">
          <!-- <div class="modal_close cancerButton">
            <img th:src="@{/assets/images/modal_close.png}" alt="모달 닫기버튼">
          </div>                       -->
          <div class="modal_head">
          </div>
          <div class="modal_con scrollbar">
            모든 정보를 입력하세요.
          </div>

        </div>
        <div class="modal_btn">
          <button class="cancerButton " type="button">확인</button>
        </div>
        <!-- <div class="modal_btn flex">
            <button class="cancerButton " type="button">확인</button>
            <button class="cancerButton " type="button">확인</button>
        </div> -->
      </div>
    </div>
  </div>
</div>
</body>
</html>